<!DOCTYPE html>
<html lang="nl">
<head>
  <!-- Firebase App (core SDK) -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<!-- Firebase Firestore -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <meta charset="UTF-8" />
  <title>Todo | Teck</title>
  <link rel="stylesheet" href="css/style.css" />
  </head>
<body>
  <nav id="main-nav"></nav>
  <div class="todo-container">
    <h2>Todo lijst</h2>
    <form id="todoForm">
      <input type="text" id="todoInput" placeholder="Nieuwe taak toevoegen..." required />
      <button type="submit" class="add-btn">+</button>
    </form>
    <ul id="todoList"></ul>
    <button onclick="goBack()" style="margin-top:1rem; background:#778DA9; color:white; padding:0.5rem 1rem; border:none; border-radius:0.5rem; cursor:pointer;">
      Terug naar dashboard
    </button>
  </div>

  <script>
    const todoForm = document.getElementById('todoForm');
    const todoInput = document.getElementById('todoInput');
    const todoList = document.getElementById('todoList');

    // Laad todos van sessionStorage
    let todos = JSON.parse(sessionStorage.getItem('todos') || '[]');

    function saveTodos() {
      sessionStorage.setItem('todos', JSON.stringify(todos));
    }

    function renderTodos() {
      todoList.innerHTML = '';
      todos.forEach((todo, index) => {
        const li = document.createElement('li');
        li.textContent = todo.text;
        if (todo.completed) li.classList.add('completed');

        li.onclick = () => {
          todos[index].completed = !todos[index].completed;
          saveTodos();
          renderTodos();
        };

        const removeBtn = document.createElement('button');
        removeBtn.textContent = 'Ã—';
        removeBtn.className = 'remove-btn';
        removeBtn.onclick = (e) => {
          e.stopPropagation();
          todos.splice(index, 1);
          saveTodos();
          renderTodos();
        };

        li.appendChild(removeBtn);
        todoList.appendChild(li);
      });
    }

    todoForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const text = todoInput.value.trim();
      if (text) {
        todos.push({ text, completed: false });
        saveTodos();
        renderTodos();
        todoInput.value = '';
      }
    });

    function goBack() {
      window.location.href = 'dashboard.html';
    }

    renderTodos();
  </script>
  <script>
    fetch('nav.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('main-nav').innerHTML = data;
      });
  </script>
</body>
</html>
